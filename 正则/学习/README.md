# 正则表达式

## 发展历史

正则表达式的“祖先”可以上溯至对人类神经系统如何工作的早期研究

## 为什么要学习正则



## 正则表达式是什么

## 正则表达式可以做什么

- 测试字符串内的模式
  - 例如，测试输入的字符串，以查看字符串内是否出现电话号码模式或信用卡号模式 -- 数据验证
- 替换文本
  - 使用正则表达式识别文档中的特定文本，完全删除该文本或者用其他文本替换它
- 基于模式匹配从字符串中提取子字符串
  - 可以查找文档内或输入域内特定的文本

## ^[0-9]+abc$

- **^** 匹配输入字符串的开始位置
- **[0-9]+** 匹配连续数字，**[0-9]** 匹配单个数字，**+** 匹配一个或者多个（不加默认匹配一个）
- **abc$** 匹配字母 **abc**并以 **abc** 结尾，**$** 为匹配输入字符串的结束位置

## ^[a-z0-9_-]{3,15}$

- 用户名，只允许包含字符、数字、下划线、连接字符(-)，长度为 3~15

## runoo+b

- 可以匹配 runoob、ronooob、runooooob等
- \+ 表示前面的字符必须至少出现一次（1 次、或多次）

## runoo*b

- 可以匹配 runoob、ronooob、runooooob 等
- \* 表示前面的字符可以不出现，也可以出现一次或多次（0 次、或 1 次、或多次）

## colou?r

- 可以匹配 color 或者 colour
- ? 表示前面的字符最多出现一次（0 次、或 1次）

## 普通字符

普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。

### [ABC]

- 匹配[...]所有的字符
- 例如[aeiou]，匹配字符串“google runoob taobao”中所有的a、e、i、o、u字符

### [^ABC]

- 匹配除了[...]所有的字符
- 例如[^aeiou]，匹配字符串“google runoob taobao”中除了a、e、i、o、u的字符

### [A-Z]

- 表示一个区间，匹配所有大写字母
- [a-z]，匹配所有小写字母
- [0-9]，匹配所有数字
- [A-Za-z]，匹配所有字母

### [\s\S]

- \s，匹配所有空白符，包括换行
- \S，非空白符。不包括换行

### /./g

- 匹配除换行符（\n、\r）之外的任何单个字符，等价于[^\n\r]

### /\w/g

- 匹配字母、数字、下划线，等价于[A-Za-z0-9_]

## 非打印字符

非打印字符也可以是正则表达式的组成部分。下表列出了表示非打印字符的转义序列：

### \cx

- 匹配由 x 指明的控制字符
- 例如，\cM 匹配一个 Control-M 或 回车符
- x 的值必须为 A-Z 或 a-z 之一，否则，将 c 视为一个原义字符 'c' 字符

### \f

- 匹配一个换页符
- 等价于 \x0c 和 \cl

### \n

- 匹配一个换行符
- 等价于 \x0a 和 \cj

### \r

- 匹配一个回车符
- 等价于 \x0d 和 \cM

### \s

- 匹配任何空白字符，包括空格、制表符、换页符
- 等价于 [\f\n\r\t\v]
- 注意 Unicode 正则表达式会匹配全角空格符

### \S

- 匹配任意非空白字符
- 等价于 [^\f\n\r\t\v]、[^\s]

### \t

- 匹配一个制表符
- 等价于 \x09 和 \cI

### \v

- 匹配一个垂直制表符
- 等价于 \x0b 和 \cK

## 特殊字符

所谓特殊字符，就是一些有特殊含义的字符，如上面说的 runoo*b 中的 *，简单的说就是表示任何字符串的意思。如果要查找字符串中的 * 符号，则需要对 * 进行转义，即在其前加一个 \，runo\*ob 匹配字符串 runo*ob。

许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符"转义"，即，将反斜杠字符\ 放在它们前面。下表列出了正则表达式中的特殊字符：

### $

- 匹配输入字符串的结尾位置
- 如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 '\n' 或 '\r'
- 匹配 '$' 字符，使用 \$

### ()

- 标记一个子表达式的开始和结束位置
- 子表达式可以获取供以后使用
- 匹配 '('、')'，使用 \\( 和 \\)

### \*

- 匹配前面的子表达式 0次 或 多次

### \+

- 匹配前面的子表达式 1次 或 多次

### \.

- 匹配除换行符 \n 和 \r 之外的任何单字符

### \[

- 标记一个中括号表达式的开始

### ?

- 匹配前面的子表达式 0次 或 1次
- 或知名一个非贪婪限定符

### \

- 将下一个字符标记为特殊字符、或原义字符、或向后引用、或八进制转义字符

### ^

- 匹配输入字符串的开始位置
- 如果在中括号中使用，表示不接受该方括号表达式中的字符集合

### {

- 标记限定符表达式的开始

### |

- 指明两项之间的一个选择

## 限定符

限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 * 或 + 或 ? 或 {n} 或 {n,} 或 {n,m} 共6种。

正则表达式的限定符有：

### \*

### \+

### ?

### {n}

### {n,}

### {n,m}

## String.prototype.match()

### 返回值

- 如果使用g标志，则将返回与完整正则表达式匹配的所有结果，但不会返回捕获组。
- 如果未使用g标志，则仅返回第一个完整匹配及其相关的捕获组（Array）。 在这种情况下，返回的项目将具有如下所述的其他属性。
